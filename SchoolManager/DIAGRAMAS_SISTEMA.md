# ๐ DIAGRAMAS DEL SISTEMA EDUPLANNER

## ๐๏ธ DIAGRAMA DE ARQUITECTURA GENERAL

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                           USUARIOS                                   โ
โ  SuperAdmin โ Admin โ Director โ Teacher โ Student โ Parent         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                         โ
                         โ HTTPS
                         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      PRESENTATION LAYER                              โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ  Controllers (MVC) - 26 controladores                        โ   โ
โ  โ  - AuthController, UserController, StudentController...     โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ  Views (Razor) - 52+ vistas                                 โ   โ
โ  โ  - Login, Dashboard, Gradebook, Attendance...               โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ  ViewModels - 27 modelos de vista                           โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                         โ
                         โ Dependency Injection
                         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    APPLICATION LAYER                                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ  Services (Business Logic) - 33 servicios                   โ   โ
โ  โ  - IUserService, IActivityService, IAttendanceService...    โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ  DTOs (Data Transfer Objects) - 36 DTOs                     โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ  Mappings (AutoMapper)                                       โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                         โ
                         โ Entity Framework Core 9.0
                         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    DATA ACCESS LAYER                                 โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ  DbContext (SchoolDbContext)                                โ   โ
โ  โ  - OnModelCreating (configuraciรณn de entidades)             โ   โ
โ  โ  - DateTimeInterceptor (conversiรณn UTC)                     โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ  Models (Entities) - 31 modelos                             โ   โ
โ  โ  - User, School, Activity, Attendance, Grade...             โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ  Migrations - 23 migraciones                                โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                         โ
                         โ Npgsql 9.0.4 (PostgreSQL Driver)
                         โ SSL/TLS Connection
                         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    DATABASE LAYER                                    โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ  PostgreSQL 18.0 (Render Cloud - Oregon)                    โ   โ
โ  โ  - 27 tablas principales                                     โ   โ
โ  โ  - 64 รญndices                                                โ   โ
โ  โ  - Extensions: uuid-ossp, pgcrypto                          โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    CROSS-CUTTING CONCERNS                            โ
โ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ             โ
โ  โ Authenticationโ  โ Authorizationโ  โ   Auditing   โ             โ
โ  โ  (Cookies)   โ  โ    (Roles)   โ  โ (AuditLogs)  โ             โ
โ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ             โ
โ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ             โ
โ  โ   Logging    โ  โ   DateTime   โ  โ    Email     โ             โ
โ  โ  (Console)   โ  โ  (Middleware)โ  โ   (SMTP)     โ             โ
โ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ  โโโโโโโโโโโโโโโโ             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐๏ธ DIAGRAMA DE BASE DE DATOS (SIMPLIFICADO)

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      MULTI-TENANT SCHEMA                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโ
โ    schools       โ โโโโ
โโโโโโโโโโโโโโโโโโโโค    โ
โ id (PK)          โ    โ
โ name             โ    โ
โ address          โ    โ 1:1
โ phone            โ    โ
โ logo_url         โ    โ
โ admin_id (FK) โโโโผโโโโโค
โโโโโโโโโโโโโโโโโโโโ    โ
         โ              โ
         โ 1:N          โ
         โผ              โ
โโโโโโโโโโโโโโโโโโโโ    โ
โ   users          โ โโโโ
โโโโโโโโโโโโโโโโโโโโค
โ id (PK)          โ
โ school_id (FK)   โโโโโโโโโโโโโโโโโโ
โ name             โ                 โ
โ last_name        โ                 โ
โ email (UNIQUE)   โ                 โ
โ password_hash    โ                 โ
โ role (ENUM)      โ                 โ
โ status           โ                 โ
โ document_id      โ                 โ
โ cellphone_*      โ                 โ
โ disciplina       โ                 โ
โ orientacion      โ                 โ
โ inclusivo        โ                 โ
โ created_by (FK) โโผโโโโโโ           โ
โ updated_by (FK) โโผโโโ  โ           โ
โโโโโโโโโโโโโโโโโโโโ  โ  โ           โ
         โ            โ  โ           โ
         โ 1:N        โ  โ           โ
         โผ            โ  โ           โ
โโโโโโโโโโโโโโโโโโโโ  โ  โ           โ
โ audit_logs       โ  โ  โ           โ
โโโโโโโโโโโโโโโโโโโโค  โ  โ           โ
โ id (PK)          โ  โ  โ           โ
โ school_id (FK)   โ  โ  โ           โ
โ user_id (FK) โโโโโผโโโ  โ           โ
โ action           โ     โ           โ
โ resource         โ     โ           โ
โ details (JSON)   โ     โ           โ
โ ip_address       โ     โ           โ
โ timestamp        โ     โ           โ
โโโโโโโโโโโโโโโโโโโโ     โ           โ
                         โ           โ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      ACADEMIC CATALOG                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโ       โโโโโโโโโโโโโโโโโโโโ       โโโโโโโโโโโโโโโโโโโโ
โ  grade_levels    โ       โ     groups       โ       โ     subjects     โ
โโโโโโโโโโโโโโโโโโโโค       โโโโโโโโโโโโโโโโโโโโค       โโโโโโโโโโโโโโโโโโโโค
โ id (PK)          โ       โ id (PK)          โ       โ id (PK)          โ
โ name             โ       โ name             โ       โ name             โ
โ description      โ       โ grade            โ       โ code             โ
โ school_id (FK) โโโผโโโ    โ description      โ       โ description      โ
โโโโโโโโโโโโโโโโโโโโ  โ    โ school_id (FK) โโโผโโโ    โ area_id (FK) โโโโโผโโโ
         โ            โ    โโโโโโโโโโโโโโโโโโโโ  โ    โ school_id (FK)   โ  โ
         โ 1:N        โ             โ            โ    โโโโโโโโโโโโโโโโโโโโ  โ
         โผ            โ             โ 1:N        โ             โ            โ
โโโโโโโโโโโโโโโโโโโโ  โ             โผ            โ             โ 1:N        โ
โ  specialties     โ  โ    โโโโโโโโโโโโโโโโโโโโ  โ             โผ            โ
โโโโโโโโโโโโโโโโโโโโค  โ    โ      area        โ  โ    โโโโโโโโโโโโโโโโโโโโ  โ
โ id (PK)          โ  โ    โโโโโโโโโโโโโโโโโโโโค  โ    โ  activity_types  โ  โ
โ name             โ  โ    โ id (PK)          โโโโ    โโโโโโโโโโโโโโโโโโโโค  โ
โ description      โ  โ    โ name             โ       โ id (PK)          โ  โ
โ school_id (FK)   โ  โ    โ code             โ       โ name             โ  โ
โโโโโโโโโโโโโโโโโโโโ  โ    โ description      โ       โ icon             โ  โ
         โ            โ    โ school_id (FK)   โ       โ color            โ  โ
         โ            โ    โโโโโโโโโโโโโโโโโโโโ       โ is_global        โ  โ
         โ            โ                               โ school_id (FK)   โ  โ
         โ            โ                               โโโโโโโโโโโโโโโโโโโโ  โ
         โ            โ                                        โ            โ
         โ            โ                                        โ            โ
         โผ            โผ                                        โผ            โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              subject_assignments (Materia โ Grado-Grupo)            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ id (PK)                                                              โ
โ specialty_id (FK) โโโโโโบ specialties                                โ
โ area_id (FK) โโโโโโโโโโโบ area                                       โ
โ subject_id (FK) โโโโโโโโบ subjects                                   โ
โ grade_level_id (FK) โโโโบ grade_levels                               โ
โ group_id (FK) โโโโโโโโโโบ groups                                     โ
โ school_id (FK) โโโโโโโโโบ schools                                    โ
โ status                                                               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
         โ
         โ 1:N
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ          teacher_assignments (Docente โ SubjectAssignment)          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ id (PK)                                                              โ
โ teacher_id (FK) โโโโโโโโโโโโโโโโโโโโโบ users                         โ
โ subject_assignment_id (FK) โโโโโโโโโโบ subject_assignments           โ
โ UNIQUE (teacher_id, subject_assignment_id)                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ


โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ          student_assignments (Estudiante โ Grado-Grupo)             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ id (PK)                                                              โ
โ student_id (FK) โโโโโโโโโบ users                                     โ
โ grade_id (FK) โโโโโโโโโโโบ grade_levels                              โ
โ group_id (FK) โโโโโโโโโโโบ groups                                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ


โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ      counselor_assignments (Orientador โ Grado-Grupo)               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ id (PK)                                                              โ
โ school_id (FK) โโโโโโโโโโโบ schools                                  โ
โ user_id (FK) โโโโโโโโโโโโโบ users                                    โ
โ grade_id (FK) โโโโโโโโโโโโบ grade_levels                             โ
โ group_id (FK) โโโโโโโโโโโโบ groups                                   โ
โ is_counselor                                                         โ
โ is_active                                                            โ
โ UNIQUE (school_id, user_id)                                         โ
โ UNIQUE (school_id, grade_id, group_id) WHERE grade_id IS NOT NULL  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    ACADEMIC PERIODS                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโ
โ   trimester      โ
โโโโโโโโโโโโโโโโโโโโค
โ id (PK)          โ
โ school_id (FK) โโโผโโโโโโโโโบ schools
โ name             โ
โ order            โ
โ start_date       โ
โ end_date         โ
โ is_active        โ
โโโโโโโโโโโโโโโโโโโโ
         โ
         โ 1:N
         โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                         activities                                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ id (PK)                                                               โ
โ school_id (FK) โโโโโโโโโโโโโโโโโบ schools                             โ
โ teacher_id (FK) โโโโโโโโโโโโโโโโบ users                               โ
โ subject_id (FK) โโโโโโโโโโโโโโโโบ subjects                            โ
โ group_id (FK) โโโโโโโโโโโโโโโโโโบ groups                              โ
โ grade_level_id (FK) โโโโโโโโโโโโบ grade_levels                        โ
โ activity_type_id (FK) โโโโโโโโโโบ activity_types                      โ
โ trimester_id (FK) โโโโโโโโโโโโโโบ trimester                           โ
โ name                                                                  โ
โ type                                                                  โ
โ due_date                                                              โ
โ pdf_url                                                               โ
โ created_by, updated_by (FK) โโโโบ users                               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
         โ                              โ
         โ 1:N                          โ 1:N
         โผ                              โผ
โโโโโโโโโโโโโโโโโโโโโโโ       โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ activity_attachmentsโ       โ student_activity_scores    โ
โโโโโโโโโโโโโโโโโโโโโโโค       โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ id (PK)             โ       โ id (PK)                    โ
โ activity_id (FK) โโโโผโโโ    โ student_id (FK) โโโโโโโโโโโผโโโบ users
โ file_name           โ  โ    โ activity_id (FK) โโโโโโโโโโผโโโ
โ storage_path        โ  โ    โ score (NUMERIC 2,1)       โ  โ
โ mime_type           โ  โโโโโบโ school_id (FK)            โ  โ
โ uploaded_at         โ       โ created_by, updated_by    โ  โ
โโโโโโโโโโโโโโโโโโโโโโโ       โ UNIQUE (student_id,       โ  โ
                              โ         activity_id)       โ  โ
                              โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
                                                              โ
                                                              โโโ activities

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                  ATTENDANCE & REPORTS                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                         attendance                                    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ id (PK)                                                               โ
โ student_id (FK) โโโโโโโโโโโโโโโโบ users                               โ
โ teacher_id (FK) โโโโโโโโโโโโโโโโบ users (quien registra)              โ
โ group_id (FK) โโโโโโโโโโโโโโโโโโบ groups                              โ
โ grade_id (FK) โโโโโโโโโโโโโโโโโโบ grade_levels                        โ
โ date (DATE)                                                           โ
โ status (P/A/T/J)                                                      โ
โ school_id (FK) โโโโโโโโโโโโโโโโโบ schools                             โ
โ created_by, updated_by (FK) โโโโบ users                               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ


โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    discipline_reports                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ id (PK)                                                               โ
โ student_id (FK) โโโโโโโโโโโโโโโโบ users                               โ
โ teacher_id (FK) โโโโโโโโโโโโโโโโบ users (quien reporta)               โ
โ subject_id (FK) โโโโโโโโโโโโโโโโบ subjects                            โ
โ group_id (FK) โโโโโโโโโโโโโโโโโโบ groups                              โ
โ grade_level_id (FK) โโโโโโโโโโโโบ grade_levels                        โ
โ date (timestamp)                                                      โ
โ report_type (varchar 50)                                             โ
โ category (TEXT)                                                       โ
โ description (TEXT)                                                    โ
โ documents (TEXT - JSON paths)                                        โ
โ status (pendiente/revisado/resuelto)                                 โ
โ school_id (FK) โโโโโโโโโโโโโโโโโบ schools                             โ
โ created_by, updated_by (FK) โโโโบ users                               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ


โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    orientation_reports                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ (Estructura idรฉntica a discipline_reports)                           โ
โ Enfoque: Seguimiento acadรฉmico/emocional                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                     MANY-TO-MANY TABLES                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโ        โโโโโโโโโโโโโโโโโ        โโโโโโโโโโโโโโโโโโโ
โ user_grades   โ        โ user_groups   โ        โ user_subjects   โ
โโโโโโโโโโโโโโโโโค        โโโโโโโโโโโโโโโโโค        โโโโโโโโโโโโโโโโโโโค
โ user_id  (FK) โ        โ user_id  (FK) โ        โ user_id  (FK)   โ
โ grade_id (FK) โ        โ group_id (FK) โ        โ subject_id (FK) โ
โ PK (user_id,  โ        โ PK (user_id,  โ        โ PK (user_id,    โ
โ     grade_id) โ        โ     group_id) โ        โ     subject_id) โ
โโโโโโโโโโโโโโโโโ        โโโโโโโโโโโโโโโโโ        โโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                     CONFIGURATION TABLES                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    email_configurations                               โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ id (PK)                                                               โ
โ school_id (FK) โโโโโโโโโโโโโโโโโบ schools                             โ
โ smtp_server, smtp_port                                               โ
โ smtp_username, smtp_password                                         โ
โ smtp_use_ssl, smtp_use_tls                                           โ
โ from_email, from_name                                                โ
โ is_active                                                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ


โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                     security_settings                                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ id (PK)                                                               โ
โ school_id (FK) โโโโโโโโโโโโโโโโโบ schools                             โ
โ password_min_length (default: 8)                                     โ
โ require_uppercase, require_lowercase                                 โ
โ require_numbers, require_special                                     โ
โ expiry_days (default: 90)                                            โ
โ prevent_reuse (default: 5)                                           โ
โ max_login_attempts (default: 5)                                      โ
โ session_timeout_minutes (default: 30)                                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ DIAGRAMA DE FLUJO: REGISTRO DE CALIFICACIONES

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                   FLUJO: Registro de Calificaciones                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

    START
      โ
      โผ
โโโโโโโโโโโโโโโโโ
โ Docente Login โ
โโโโโโโโโฌโโโโโโโโ
        โ
        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Ver Portal Docente       โ
โ - Materias asignadas     โ
โ - Grupos                 โ
โโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
        โ
        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Seleccionar:             โ
โ - Materia                โ
โ - Grupo                  โ
โ - Trimestre              โ
โโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
        โ
        โผ
    โโโโโโโโโ
    โ ยฟYa    โ
    โ existe โ NO
    โ activ?โโผโโโโโโโโโบ Crear Nueva Actividad
    โโโโโฌโโโโ              โ
        โ Sร               โโ Nombre
        โ                  โโ Tipo (Examen/Tarea/Proyecto)
        โ                  โโ Fecha lรญmite
        โ                  โโ Archivo adjunto (opcional)
        โ                              โ
        โผ                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ          โ
โ Seleccionar Actividad    โโโโโโโโโโโโ
โ Existente                โ
โโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
        โ
        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Ver Lista de Estudiantes โ
โ del Grupo                โ
โโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
        โ
        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Registrar Calificaciรณn   โ
โ por Estudiante           โ
โ                          โ
โ Rango: 0.0 - 9.9        โ
โโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
        โ
        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Sistema Valida:          โ
โ - Rango vรกlido           โ
โ - No duplicados          โ
โโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
        โ
        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Guardar en BD            โ
โ (student_activity_scores)โ
โโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
        โ
        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Sistema Calcula          โ
โ Promedio Automรกtico      โ
โ por Estudiante/Trimestre โ
โโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
        โ
        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Registrar Auditorรญa      โ
โ (audit_logs)             โ
โโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
        โ
        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Mostrar Confirmaciรณn     โ
โโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
        โ
        โผ
      END
```

---

## ๐ DIAGRAMA DE FLUJO: CONTROL DE ASISTENCIA

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    FLUJO: Control de Asistencia                      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

    START
      โ
      โผ
โโโโโโโโโโโโโโโโโ
โ Docente Login โ
โโโโโโโโโฌโโโโโโโโ
        โ
        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Ir a Mรณdulo Asistencia   โ
โโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
        โ
        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Seleccionar:             โ
โ - Fecha (hoy por def.)   โ
โ - Grado                  โ
โ - Grupo                  โ
โโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
        โ
        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Sistema Carga Lista de   โ
โ Estudiantes del Grupo    โ
โโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
        โ
        โผ
    โโโโโโโโโ
    โ ยฟYa    โ
    โ existe โ Sร
    โ regist?โโผโโโโโโโบ Mostrar Registro Existente
    โโโโโฌโโโโ         (Modo Ediciรณn)
        โ NO              โ
        โ                 โ
        โผ                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Mostrar Lista Vacรญa      โโโโโโโ
โโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
        โ
        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Por cada Estudiante:     โ
โ Marcar Estado:           โ
โ                          โ
โ โโโโ P - Presente        โ
โ โโโโค A - Ausente         โ
โ โโโโค T - Tardanza        โ
โ โโโโ J - Justificado     โ
โโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
        โ
        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ยฟConfirmar               โ
โ  Registro? โโโโโโโโโโNOโโโผโโโบ Cancelar
โโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
        โ Sร
        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Guardar en BD            โ
โ (attendance)             โ
โ - student_id             โ
โ - teacher_id             โ
โ - date                   โ
โ - status                 โ
โโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
        โ
        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Actualizar Estadรญsticas  โ
โ de Asistencia            โ
โโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
        โ
        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Registrar Auditorรญa      โ
โ (audit_logs)             โ
โโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
        โ
        โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ Mostrar Confirmaciรณn     โ
โ + Resumen:               โ
โ - Presentes: X           โ
โ - Ausentes: Y            โ
โ - Tardanzas: Z           โ
โโโโโโโโโฌโโโโโโโโโโโโโโโโโโโ
        โ
        โผ
      END
```

---

## ๐ DIAGRAMA DE SECUENCIA: AUTENTICACIรN

```
Usuario          Browser       AuthController    UserService      Database
  โ                โ                 โ               โ               โ
  โ  1. Ir a Login โ                 โ               โ               โ
  โโโโโโโโโโโโโโโโ>โ                 โ               โ               โ
  โ                โ                 โ               โ               โ
  โ                โ  2. GET /Auth/Login            โ               โ
  โ                โโโโโโโโโโโโโโโโโ>โ               โ               โ
  โ                โ                 โ               โ               โ
  โ                โ  3. Return View โ               โ               โ
  โ                โ<โโโโโโโโโโโโโโโโโค               โ               โ
  โ                โ                 โ               โ               โ
  โ 4. Mostrar Formโ                 โ               โ               โ
  โ<โโโโโโโโโโโโโโโโค                 โ               โ               โ
  โ                โ                 โ               โ               โ
  โ 5. Ingresar    โ                 โ               โ               โ
  โ    Email+Pass  โ                 โ               โ               โ
  โโโโโโโโโโโโโโโโ>โ                 โ               โ               โ
  โ                โ                 โ               โ               โ
  โ                โ  6. POST /Auth/Login            โ               โ
  โ                โ     [LoginViewModel]            โ               โ
  โ                โโโโโโโโโโโโโโโโโ>โ               โ               โ
  โ                โ                 โ               โ               โ
  โ                โ                 โ 7. ValidateUser(email, pass) โ
  โ                โ                 โโโโโโโโโโโโโโโ>โ               โ
  โ                โ                 โ               โ               โ
  โ                โ                 โ               โ 8. SELECT user
  โ                โ                 โ               โโโโโโโโโโโโโโโ>โ
  โ                โ                 โ               โ               โ
  โ                โ                 โ               โ 9. User record
  โ                โ                 โ               โ<โโโโโโโโโโโโโโโค
  โ                โ                 โ               โ               โ
  โ                โ                 โ 10. BCrypt.Verify(pass, hash)
  โ                โ                 โ               โ               โ
  โ                โ                 โ 11. Valid Userโ               โ
  โ                โ                 โ<โโโโโโโโโโโโโโโค               โ
  โ                โ                 โ               โ               โ
  โ                โ 12. Create Auth Cookie          โ               โ
  โ                โ     (Claims: Id, Name, Role)   โ               โ
  โ                โ                 โ               โ               โ
  โ                โ                 โ 13. UPDATE last_login          โ
  โ                โ                 โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ>โ
  โ                โ                 โ               โ               โ
  โ                โ                 โ 14. INSERT audit_log (LOGIN) โ
  โ                โ                 โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ>โ
  โ                โ                 โ               โ               โ
  โ                โ 15. Redirect /Home/Index       โ               โ
  โ                โ<โโโโโโโโโโโโโโโโโค               โ               โ
  โ                โ                 โ               โ               โ
  โ 16. Dashboard  โ                 โ               โ               โ
  โ<โโโโโโโโโโโโโโโโค                 โ               โ               โ
  โ                โ                 โ               โ               โ
```

---

## ๐ DIAGRAMA DE COMPONENTES

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                        WEB APPLICATION                               โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ  โ                     FRONTEND                                โ    โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ    โ
โ  โ  โ  Views (Razor)                                        โ  โ    โ
โ  โ  โ  - _AdminLayout.cshtml                               โ  โ    โ
โ  โ  โ  - Login.cshtml, Dashboard.cshtml                    โ  โ    โ
โ  โ  โ  - Gradebook/*.cshtml, Attendance/*.cshtml           โ  โ    โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ    โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ    โ
โ  โ  โ  Static Files (wwwroot)                              โ  โ    โ
โ  โ  โ  โโ css/ (Bootstrap, Custom)                         โ  โ    โ
โ  โ  โ  โโ js/ (jQuery, Custom)                             โ  โ    โ
โ  โ  โ  โโ lib/ (Bootstrap, FontAwesome)                    โ  โ    โ
โ  โ  โ  โโ images/ (logos)                                  โ  โ    โ
โ  โ  โ  โโ uploads/ (user files)                            โ  โ    โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ    โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ                                                                      โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ  โ                   BACKEND (MVC)                             โ    โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ    โ
โ  โ  โ  Controllers                                          โ  โ    โ
โ  โ  โ  - AuthController                                     โ  โ    โ
โ  โ  โ  - UserController                                     โ  โ    โ
โ  โ  โ  - TeacherGradebookController                        โ  โ    โ
โ  โ  โ  - AttendanceController                              โ  โ    โ
โ  โ  โ  - DisciplineReportController                        โ  โ    โ
โ  โ  โ  - (21 more controllers)                             โ  โ    โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ    โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ    โ
โ  โ  โ  ViewModels / DTOs                                    โ  โ    โ
โ  โ  โ  - LoginViewModel                                     โ  โ    โ
โ  โ  โ  - ActivityDto                                        โ  โ    โ
โ  โ  โ  - AttendanceDto                                      โ  โ    โ
โ  โ  โ  - (30+ more DTOs)                                    โ  โ    โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ    โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ                                                                      โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ  โ                   BUSINESS LOGIC                            โ    โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ    โ
โ  โ  โ  Services (Interfaces + Implementations)             โ  โ    โ
โ  โ  โ  - IAuthService / AuthService                         โ  โ    โ
โ  โ  โ  - IUserService / UserService                         โ  โ    โ
โ  โ  โ  - IActivityService / ActivityService                 โ  โ    โ
โ  โ  โ  - IAttendanceService / AttendanceService            โ  โ    โ
โ  โ  โ  - (29 more services)                                 โ  โ    โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ    โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ    โ
โ  โ  โ  AutoMapper Profiles                                  โ  โ    โ
โ  โ  โ  - Model โ DTO โ ViewModel                           โ  โ    โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ    โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ                                                                      โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ  โ                   DATA ACCESS                               โ    โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ    โ
โ  โ  โ  DbContext (SchoolDbContext)                          โ  โ    โ
โ  โ  โ  - Entities Configuration                             โ  โ    โ
โ  โ  โ  - Relationships                                      โ  โ    โ
โ  โ  โ  - Constraints                                        โ  โ    โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ    โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ    โ
โ  โ  โ  Models (Entities)                                    โ  โ    โ
โ  โ  โ  - User, School, Activity, Grade, etc.               โ  โ    โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ    โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ    โ
โ  โ  โ  EF Core Migrations                                   โ  โ    โ
โ  โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ    โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ                                                                      โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โ  โ                   MIDDLEWARE                                โ    โ
โ  โ  - Authentication Middleware                                โ    โ
โ  โ  - Authorization Middleware                                 โ    โ
โ  โ  - DateTime Conversion Middleware                           โ    โ
โ  โ  - Exception Handler Middleware                             โ    โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ    โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                                 โ
                                 โ Npgsql Driver
                                 โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              POSTGRESQL DATABASE (Render Cloud)                      โ
โ  - 27 Tables                                                         โ
โ  - 64 Indexes                                                        โ
โ  - Foreign Keys, Constraints                                         โ
โ  - Extensions: uuid-ossp, pgcrypto                                  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

**Fecha:** 10 de Octubre de 2025  
**Versiรณn:** 1.0

