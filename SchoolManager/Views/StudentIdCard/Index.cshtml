@{
    ViewData["Title"] = "Carnet Estudiantil";
    Layout = "_AdminLayout";
}

<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <div class="d-flex justify-content-between align-items-center">
                        <h3 class="card-title">
                            <i class="fas fa-id-card"></i> Carnet Estudiantil
                        </h3>
                        <a href="/id-card/settings" class="btn btn-sm btn-outline-primary">
                            <i class="fas fa-cog"></i> Configurar Carnet
                        </a>
                    </div>
                </div>
                <div class="card-body">
                    <table id="studentsTable" class="table table-bordered table-striped table-hover">
                        <thead>
                            <tr>
                                <th>Estudiante</th>
                                <th>Grado</th>
                                <th>Grupo</th>
                                <th>Acción</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script>
$(function(){
    $('#studentsTable').DataTable({
        ajax: '/StudentIdCard/api/list-json',
        columns: [
            { data: 'fullName', title: 'Estudiante' },
            { data: 'grade', title: 'Grado' },
            { data: 'group', title: 'Grupo' },
            {
                data: 'id',
                title: 'Acción',
                orderable: false,
                searchable: false,
                render: function(data, type, row) {
                    return `<a href="/StudentIdCard/ui/generate/${data}" class="btn btn-primary btn-sm">
                                <i class="fas fa-id-card"></i> Generar Carnet
                            </a>`;
                }
            }
        ],
        language: {
            url: 'https://cdn.datatables.net/plug-ins/1.13.6/i18n/es-ES.json'
        },
        responsive: true,
        pageLength: 25
    });
});
</script>
}
